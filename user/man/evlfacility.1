.\" This manpage has been automatically generated by docbook2man
.\" from a DocBook document.  This tool can be found at:
.\" <http://shell.ipoline.com/~elmert/comp/docbook2X/> 
.\" Please send any bug reports, improvements, comments, patches, 
.\" etc. to Steve Cheng <steve@ggi-project.org>.
.\" This man page has been further modified from the
.\" docbook2man output. For more information, contact
.\" Dennis Grace at dgrace@us.ibm.com
.TH "EVLFACILITY" "" "11 March 2002" ""
.SH NAME
evlfacility \- Manage facility registry
.SH SYNOPSIS
\fBevlfacility\fR\fB  -l\fR|\fB--list
\fR

\fBevlfacility\fR\fB  -v\fR|\fB--verify
\fI[file]\fB
\fR

\fBevlfacility\fR\fB  -r\fR|\fB--replace
\fIfile\fB
\fR

\fBevlfacility\fR\fB  -a\fR|\fB--add \fIfacility-name\fB\fR 
[\fB-k\fR|\fB--kernel\fR] [\fB-p\fR|\fB--private\fR] [\fB-f\fR|\fB--filter \fIfilter\fB\fR]
[\fB-F\fR|\fB--force\fR]

\fBevlfacility\fR\fB  -d\fR|\fB--delete
\fIfacility-name\fB
\fR

\fBevlfacility\fR \fB  -c\fR|\fB--change \fIfacility-name\fB\fR [\fB-k\fR|\fB--kernel\fR] |
[\fB-u\fR|\fB--user\fR] | [\fB-p\fR|\fB--private\fR] | [\fB-n\fR|\fB--noprivate\fR] | [\fB-f\fR|\fB--filter
\fIfilter\fR|\fInofilter\fR]
.SH "DESCRIPTION"
.PP
The \fBevlfacility\fR command lets you list
contents of the event logging facility registry, replace the
entire facility registry, add facilities (with options) to the
facility registry, delete facilities, or modify an existing
facility.
.PP
For \fBevlfacility\fR options that modify
the facility registry, event logging applications already in
progress will start using the modified registry within 5
seconds. The following options are accepted (unless otherwise
noted, root permission is required to use these options):
.SH "OPTIONS"
.TP
\fB-l, --list\fR
Displays the facility names and
associated integer values contained in the facility
registry,
\fI/etc/evlog.d/facility_registry\fR. Also
displays whether the facility logs events from the
kernel, which events, if any, are written to the
\fI/etc/evlog.d/privatelog\fR file, and
which events have restricted logging.

This option is available to all users.
.TP
\fB-v, --verify \fI[file]\fB\fR
Checks the validity of the indicated
file and reports any errors found to stderr. If no
file is specified, then the contents of the facility
registry file,
\fI/etc/evlog.d/facility_registry\fR, are
checked for validity.
.TP
\fB-r, --replace \fIfile\fB\fR
Checks the validity of the indicated
file and reports any errors found to stderr. If no
errors are found, then the contents of the facility
registry file,
\fI/etc/evlog.d/facility_registry\fR, are
replaced by those of the indicated file.
.TP
\fB-a, --add \fIfacility-name\fB [-k|--kernel] [-p, --private]
\fB[-f, --filter \fIfilter\fB]\fR
Adds an entry to the facility registry
for the indicated
\fIfacility-name\fR.  A
\fIfacility-value\fR (integer) is
automatically assigned. 

If \fB--kernel\fR is specified, it
indicates that this facility will log events from the
kernel. Otherwise, events will be logged from
user-space.

If \fB--private\fR is specified, then
events logged with the specified facility will be
logged to the private log file,
\fI/etc/evlog.d/privatelog\fR, instead of
the standard log file,
\fI/etc/evlog.d/eventlog\fR.

If a \fIfilter\fR is
specified, it indicates that for this facility, only
records that match the indicated
\fIfilter\fR will be logged. Only
attributes in the fixed-portion of the event record
may be used in the \fIfilter\fR expression.
See the \fI evlquery man page\fR for
more information.
.TP
\fB-F, --force\fR
Valid only with
.BR --add .
Ordinarily, an attempt to add a facility that is already in the registry
results in a diagnostic message and a non-zero exit status.
If
.B --force
is specified, and the specified facility is already in the registry,
.B evlfacility
just verifies that the existing entry has the correct
(automatically assigned) code for that facility name;
.BR --kernel ,
.BR --private ,
and
.B --filter
are ignored.
.TP
\fB-d, --delete \fIfacility-name\fB\fR
Deletes an entry from the facility
registry for the specified
\fIfacility-name\fR.
.TP
\fB-c, --change \fIfacility-name\fB [-k|--kernel] | [-u|--user] | [-p|--private] | [-n|--noprivate] | [-f|--filter \fIfilter\fB|\fInofilter\fB]\fR 
Modifies one or more of the optional
parameters associated with
\fIfacility-name\fR in the
facility registry.
.RS
.TP
\fB-k, --kernel\fR
Adds the "kernel" parameter for the
specified
\fIfacility-name\fR in
the facility registry. This option is not
valid with \fB--user\fR.
.TP
\fB-u, --user\fR
Removes the "kernel" parameter for the
specified
\fIfacility-name\fR in
the facility registry. This option is not
valid with \fB--kernel\fR
.TP
\fB-p, --private\fR
Adds the "private" parameter for the
specified
\fIfacility-name\fR in
the facility registry. This option is not
valid with \fB--noprivate.\fR
.TP
\fB-n, --noprivate\fR
Deletes the "private" parameter for the
specified
\fIfacility-name\fR in
the facility registry. This option is not
valid with \fB--private.\fR
.TP
\fB-f, --filter \fIfilter\fB| \fInofilter\fB\fR
Adds the specified restricted logging
filter for the specified
\fIfacility-name\fR in
the facility registry. If
\fInofilter\fR is
specified, then any existing filter is
removed.  See the \fI evlquery man page\fR for
more information.

.RE
.SH "EXAMPLE"

.nf
evlfacility --add "Mr Admin" --private
--filter 'format!=BINARY && gid="adm"'
.fi
.PP
Adds the facility "Mr Admin" to the facility registry.
Events from this
facility will be logged to the private log. BINARY events will
not be logged (only variable-length data formats of NODATA or
STRING), and events will be logged only if group id is
"admins".
.SH "FILES"
.PP
\fI/etc/evlog.d/facility_registry\fR
Facility registry


.SH "SEE ALSO"
\fIevlquery man page\fR    Filter expression syntax rules

