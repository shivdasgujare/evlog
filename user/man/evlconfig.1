.\" This manpage has been modified by Dennis Grace
.\" of IBM LTC Documentation Services from a document
.\" that was automatically generated by docbook2man
.\" from a DocBook document.  This tool can be found at:
.\" <http://shell.ipoline.com/~elmert/comp/docbook2X/>
.\" Please send any bug reports, improvements, comments, patches,
.\" etc. to Steve Cheng <steve@ggi-project.org>.
.\" For questions regarding the modifications from the
.\" docbook2man output, contact Dennis Grace at
.\" <dgrace@us.ibm.com>.
.TH "EVLCONFIG" "" "14 September 2001" "" ""
.SH NAME
evlconfig \- Configure logging daemon
.SH SYNOPSIS

\fBevlconfig\fR \fB -l | --list\fR

\fBevlconfig\fR \fB -s | --screen \fR \fB filter \fR| \fBnofilter\fR

\fBevlconfig\fR \fB -i | --interval \fIseconds\fB\fR

\fBevlconfig\fR \fB -c | --count \fIevents\fB\fR

\fBevlconfig\fR \fB -d | --discarddups\fR \fB on \fR| \fBoff\fR

\fBevlconfig\fR \fB -L | --lookbacks \fIsize\fB\fR

\fBevlconfig\fR \fB -o | --output\fR  \fB \fIseverity-level \fR| \fBoff\fR
\fR

.SH "DESCRIPTION"
.PP
The \fBevlconfig\fR command lets you change
the default settings for event logging.  Unless otherwise
noted, root permission is required to use the following
\fBevlconfig\fR options.
.SH "OPTIONS"
.TP
\fB-l, --list\fR
Lists current settings for the
following:
.nf
   Discarding of duplicate events, enabled or disabled
   Discarding of duplicates of time interval and count
   Number of events in the duplicate lookback buffer
   Event screening
   Console display level
.fi
This option is available to all users.
.TP
\fB-s, --screen  \fIfilter\fB|\fInofilter\fB\fR
Specifies a filter name or filter
expression for screening out events. See the 
\fIevlquery man page\fR for details. All
events that match the filter are discarded. All event
record attributes from the fixed portion of the event
record can be specified. The default logging behavior
is that events logged from the kernel
(log_facility==KERN) or logged by root (effective user
ID of 'root') are not screened out and
discarded. Also, by default applications are not
screened out and discarded (unless attempting to log
with log_facility==KERN). Issuing the
\fBevlconfig\fR command with the
\fB--screen\fR option replaces the existing
screen, if any, and a filter specification of
\fInofilter\fR removes the screen.
.TP
\fB-i, --interval \fIseconds\fB\fR
Sets the time interval for discarding
duplicate events.
After it has discarded a duplicate event,
\fBevlogd\fR will wait no more than this many seconds
before logging a message about the discarded duplicate(s).
The default interval is three (3)
seconds. The allowable range is from 1 to 3600 (1
hour) seconds. If this parameter
(\fIinterval\fR) is non-zero but
\fIcount\fR is set to zero, then
discarding of duplicates will be based strictly on
time interval, and event \fIcount\fR will
be ignored. If \fIinterval\fR and
\fIcount\fR are both equal to
zero, then logging a message about the discarded duplicates will
be delayed for as long as possible.
.TP
\fB-c, --count \fIevents\fB\fR
Sets the event count for discarding
duplicate events.
\fBevlogd\fR will discard no more than this many duplicates of an event
before logging a message about the discarded duplicates.
The default count is 100 events. The
allowable range is from 1 to 10000. If this parameter
(\fIcount\fR) is non-zero, but
\fIinterval\fR is set to zero, then the
discarding of duplicates will be based strictly on
event count, and time interval will be ignored. If
\fIinterval\fR and
\fIcount\fR are both equal to zero,
then logging a message about the discarded duplicates will be
delayed for as long as possible.
.TP
\fB-L, --lookbacks \fIsize\fB\fR
Sets the number of entries in the lookback buffer,
used as a cache for discarding of duplicates.
An incoming event is compared against all events in the
lookback buffer to determine if it is a duplicate.
If it is not identical to any of the stored events,
then it replaces one of the events in the buffer.
The allowable range is from 1 to 10.
If the value is set to zero then a default size of 5 is used.
.TP
\fB-d, --discarddups \fIon\fB|\fIoff\fB\fR
Enables or disables the discarding of
events that are being logged in rapid succession. The
default setting is \fIon\fR. This
parameter is stored in
\fI/etc/evlog.d/evlog.conf\fR.
.TP
\fB-o, --output  \fIseverity-level\fB|\fIoff\fB\fR
Controls displaying of kernel events on the system
console.  Either specifies the
severity-level(s) of events to be displayed on the 
console, or turns displaying completely off.  The 
default setting is "off".  Valid severity-levels are
EMERG, ALERT, CRIT, ERR, WARNING, NOTICE, INFO, DEBUG. 
Specifying a severity-level of CRIT, for example, will
cause events with severity-level of CRIT and higher 
(ALERT and EMERG) to be displayed on the system console.

This option utilizes the same system call as the klogd command
with the -c option.  Events forwarded from printk will not
be displayed, since they would be duplicates of
messages already displayed from printk.

For all displayed events, the facility (hex), event type (hex), 
and format (STRING, PRINTF, BINARY or NODATA)
will be displayed.  For events with log_format of
POSIX_LOG_STRING the formatted string will
also be displayed.  For events with log_format of
POSIX_LOG_BINARY up to the first 16 bytes
of variable data will be displayed in hex.

.SH "EXAMPLES"
.PP
\fBExample 1.\fR

.nf
evlconfig --list
                
.fi
displays the following:

.nf
  Discard_dups = on
  Discard interval = 3 seconds
  Discard count = 10 identical events
  Event screen:
    uid!="root" && severity=DEBUG
  Console display level = CRIT                
.fi
.PP
The event screen in this example indicates to
log DEBUG events only from root. All other DEBUG
events are discarded.


\fBExample 2.\fR

An example of kernel events displayed on the system console:

.nf
FFFEA1000:TDEED3991:S:This is an example of an event with log_format of STRING.\fR
F00002000:T00000015:B:<11223344 AABBCCDD 55667788 99AABBCC ...> 231 more bytes\fR
F20202000:T11110016:B:<3243632C DAB>\fR
FAABBCC30:T01650165:N:<No data>\fR

.if

.nf
F indicates Facility (hex), T indicates Event type (hex), 
S indicates STRING, B indicates BINARY, N indicates No Data.


.fi


.SH "FILES"
.TP
\fB\fI/etc/evlog.d/evlog.conf\fB\fR
evlogd Configuration File
.TP
\fB\fI/var/evlog/eventlog\fB\fR
Standard Event Log
.TP
\fB\fI/var/evlog/privatelog\fB\fR
Private Log
.TP
\fB\fI/var/run/evlogd.pid\fB\fR
evlogd Process ID

.SH "SEE ALSO"
\fIevlquery man page\fR    Filter expression syntax rules

